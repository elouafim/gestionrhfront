<div class="dashboard-container">

  <div *ngIf="alertMessage" class="alert-message" role="alert" aria-live="assertive">
    {{ alertMessage }}
  </div>

  <h2>Tableau de bord</h2>

  <!-- Actions rapides -->
  <div class="quick-actions" *ngIf="quickActions[role]?.length">
    <button
      mat-raised-button
      color="primary"
      *ngFor="let action of quickActions[role]"
      (click)="onQuickActionClick(action.label)"
      class="quick-action-btn"
    >
      <mat-icon>{{ action.icon }}</mat-icon> {{ action.label }}
    </button>
  </div>

  <!-- Cartes de statistiques -->
  <div class="cards-container">
    <div
      class="card"
      *ngFor="let stat of statsToDisplay"
      [style.borderTopColor]="stat.color"
      (click)="onCardClick(stat.title)"
      tabindex="0"
      role="button"
      [attr.aria-label]="'Carte ' + stat.title + ', valeur: ' + stat.value"
      (keydown.enter)="onCardClick(stat.title)"
      (keydown.space)="onCardClick(stat.title)"
    >
      <mat-icon class="card-icon" [style.color]="stat.color" aria-hidden="true">{{ stat.icon }}</mat-icon>
      <div class="card-content">
        <p class="card-title">{{ stat.title }}</p>
        <p class="card-value">
          {{ stat.value }} <span *ngIf="stat.unit">{{ stat.unit }}</span>
        </p>
      </div>
    </div>
  </div>

  <!-- Graphique -->
  <h3>Congés validés par mois</h3>
  <ngx-charts-bar-vertical
    [view]="view"
    [scheme]="'vivid'"
    [results]="barChartData"
    [gradient]="gradient"
    [xAxis]="showXAxis"
    [yAxis]="showYAxis"
    [legend]="showLegend"
    [showXAxisLabel]="showXAxisLabel"
    [showYAxisLabel]="showYAxisLabel"
    [xAxisLabel]="xAxisLabel"
    [yAxisLabel]="yAxisLabel"
  >
  </ngx-charts-bar-vertical>

</div>
